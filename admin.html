<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”— ë§í¬ ìƒì„± ë§ˆë²•ì‚¬ V2</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; max-width: 600px; margin: 0 auto; padding: 20px; background: #f0f2f5; }
        .card { background: white; padding: 25px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        h2 { text-align: center; color: #1a1a1a; margin-bottom: 30px; }
        
        .input-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: 600; color: #444; font-size: 14px; }
        input, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 15px; transition: 0.2s; }
        input:focus { border-color: #007aff; outline: none; }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-main { width: 100%; padding: 16px; background: #007aff; color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .btn-main:hover { background: #0056b3; }
        
        .btn-sub { padding: 8px 12px; background: #eee; border: none; border-radius: 6px; cursor: pointer; font-size: 13px; color: #555; }

        /* ê²°ê³¼ ì˜ì—­ (ìˆ¨ê¹€) */
        #resultArea { margin-top: 30px; padding-top: 20px; border-top: 2px dashed #eee; display: none; }
        
        .final-link-box { background: #e9f5ff; padding: 15px; border-radius: 8px; border: 1px solid #cce5ff; margin-bottom: 20px; }
        .final-link-text { font-family: monospace; color: #0056b3; word-break: break-all; font-weight: bold; }
        
        textarea#finalCode { height: 100px; background: #222; color: #81e6d9; font-family: monospace; font-size: 12px; margin-bottom: 10px; }
        
        .github-btn { background: #2dba4e; color: white; width: 100%; padding: 14px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; font-size: 15px; }
        
        .step-badge { display: inline-block; background: #333; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-right: 5px; vertical-align: middle; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸª„ ë§¤ì§ ë§í¬ ìƒì„±ê¸°</h2>

    <div class="input-group">
        <label><span class="step-badge">STEP 1</span>í´ë” ì´ë¦„ (ì˜ë¬¸/ìˆ«ì)</label>
        <input type="text" id="folderName" placeholder="ì˜ˆ: event1, video_new">
        <p style="font-size:12px; color:#888; margin-top:4px;">* ì´ ì´ë¦„ì´ ë§í¬ ì£¼ì†Œê°€ ë©ë‹ˆë‹¤.</p>
    </div>

    <div class="input-group">
        <label><span class="step-badge">STEP 2</span>ìœ íŠœë¸Œ ì˜ìƒ ë§í¬</label>
        <input type="text" id="youtubeLink" placeholder="https://youtu.be/...">
    </div>

    <div class="input-group">
        <label>ì œëª© (ì¹´í†¡ í° ê¸€ì”¨)</label>
        <input type="text" id="ogTitle" placeholder="ì˜ˆ: ì¶©ê²©! ì™•ì˜ ê³µì§„ë‹¨ ë¹„ë°€">
    </div>

    <div class="input-group">
        <label>ì„¤ëª… (ì¹´í†¡ ì‘ì€ ê¸€ì”¨)</label>
        <input type="text" id="ogDesc" placeholder="ì˜ˆ: í´ë¦­í•´ì„œ í™•ì¸í•´ë³´ì„¸ìš”">
    </div>

    <div class="input-group">
        <label>ì´ë¯¸ì§€ íŒŒì¼ëª…</label>
        <input type="text" id="imgName" value="og_image.jpg">
    </div>

    <button class="btn-main" onclick="generate()">âœ¨ ë§í¬ ìƒì„±í•˜ê¸°</button>

    <div id="resultArea">
        
        <label>ğŸ“¢ ì¹´í†¡ì— ê³µìœ í•  ìµœì¢… ë§í¬</label>
        <div class="final-link-box">
            <div id="shareLinkDisplay" class="final-link-text">https://...</div>
            <div style="text-align: right; margin-top:10px;">
                <button class="btn-sub" onclick="copyShareLink()">ğŸ”— ë§í¬ ë³µì‚¬</button>
            </div>
        </div>

        <label>ğŸ’» ê¹ƒí—ˆë¸Œì— ë¶™ì—¬ë„£ì„ ì½”ë“œ</label>
        <textarea id="finalCode" readonly></textarea>
        <p style="text-align: center; font-size: 13px; color: #666; margin-bottom: 10px;">ìœ„ ì½”ë“œê°€ ìë™ìœ¼ë¡œ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</p>

        <button class="github-btn" onclick="goToGithub()">ğŸš€ ê¹ƒí—ˆë¸Œ ê°€ì„œ ë§Œë“¤ê¸°</button>
    </div>
</div>

<script>
    function generate() {
        const folder = document.getElementById('folderName').value.trim();
        const youtube = document.getElementById('youtubeLink').value.trim();
        const title = document.getElementById('ogTitle').value.trim();
        const desc = document.getElementById('ogDesc').value.trim();
        const img = document.getElementById('imgName').value.trim();

        if(!folder || !youtube) { alert('í´ë” ì´ë¦„ê³¼ ìœ íŠœë¸Œ ë§í¬ë¥¼ ê¼­ ì…ë ¥í•´ì£¼ì„¸ìš”!'); return; }

        // 1. í˜„ì¬ í˜ì´ì§€ ì£¼ì†Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ 'ê³µìœ ìš© ìµœì¢… ë§í¬' ê³„ì‚°
        // í˜„ì¬ ì£¼ì†Œê°€ https://id.github.io/repo/admin.html ì¼ ë•Œ
        // -> https://id.github.io/repo/ ê¹Œì§€ë¥¼ ì¶”ì¶œ
        const baseUrl = window.location.href.substring(0, window.location.href.lastIndexOf('/') + 1);
        const finalShareLink = baseUrl + folder + '/';

        // 2. HTML ì½”ë“œ ìƒì„±
        const htmlCode = `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:type" content="website">
    <meta property="og:title" content="${title}">
    <meta property="og:description" content="${desc}">
    <meta property="og:image" content="./${img}">
    <meta http-equiv="refresh" content="0; url=${youtube}">
    <title>Redirecting...</title>
    <script type="text/javascript">
        window.location.href = "${youtube}";
    <\/script>
</head>
<body>
    <p>ì´ë™ ì¤‘...</p>
</body>
</html>`;

        // 3. í™”ë©´ì— ë¿Œë¦¬ê¸°
        document.getElementById('shareLinkDisplay').innerText = finalShareLink;
        document.getElementById('finalCode').value = htmlCode;
        document.getElementById('resultArea').style.display = 'block';

        // 4. ì½”ë“œ í´ë¦½ë³´ë“œ ìë™ ë³µì‚¬
        navigator.clipboard.writeText(htmlCode);
        alert('ìƒì„± ì™„ë£Œ! \nì•„ë˜ì—ì„œ [ìµœì¢… ê³µìœ  ë§í¬]ë¥¼ í™•ì¸í•˜ì„¸ìš”.');
    }

    // ê³µìœ  ë§í¬ ë³µì‚¬ ë²„íŠ¼ ê¸°ëŠ¥
    function copyShareLink() {
        const linkText = document.getElementById('shareLinkDisplay').innerText;
        navigator.clipboard.writeText(linkText).then(() => {
            alert('ì¹´í†¡ ê³µìœ ìš© ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
        });
    }

    // ê¹ƒí—ˆë¸Œ ì´ë™ ê¸°ëŠ¥ (ìŠ¤ë§ˆíŠ¸ ì£¼ì†Œ ìƒì„±)
    function goToGithub() {
        const folder = document.getElementById('folderName').value.trim();
        const repoPath = window.location.pathname.split('/')[1]; 
        const user = window.location.hostname.split('.')[0];
        
        // ê¹ƒí—ˆë¸Œ 'ìƒˆ íŒŒì¼ ë§Œë“¤ê¸°' í˜ì´ì§€ë¡œ ë°”ë¡œ ì´ë™
        const targetUrl = `https://github.com/${user}/${repoPath}/new/main/?filename=${folder}/index.html`;
        window.open(targetUrl, '_blank');
    }
</script>

</body>
</html>
